<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>RSM</title>
  <base href="/">
  <script src="http://code.createjs.com/easeljs-0.7.0.min.js"></script>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" rel="stylesheet">
</head>

<body >
  <app-root></app-root>
<!--<div>
        <canvas id="kort" width="500" height="525"></canvas>
</div>-->
  <script>

    var stage;
    var images = [];
    function init() {
      stage = new createjs.Stage("kort");
      var millisecondsToWait = 500;
      
      setTimeout(function() {
        addImage("/assets/images/kort.png", 0.65, 0.65, 0, 0);
      }, millisecondsToWait);
      setTimeout(function() {
        addImage("/assets/images/kirke.png", 0.25, 0.25, 250, 250);
      }, millisecondsToWait+50);
      setTimeout(function() {
        addImage("/assets/images/mølle.png", 0.4, 0.4, 335, 100);
      }, millisecondsToWait+50);
      setTimeout(function() {
        addImage("/assets/images/skib.png", 0.25, 0.25, 30, 375);
      }, millisecondsToWait+50);
      setTimeout(function() {
        addImage("/assets/images/hestesko.png", 0.3, 0.3, 100, 75);
      }, millisecondsToWait+50);
      
      /*addImage("/assets/images/kort.png", 0.65, 0.65, 0, 0);
      addImage("/assets/images/kirke.png", 0.25, 0.25, 250, 250);
      addImage("/assets/images/mølle.png", 0.4, 0.4, 335, 100);
      addImage("/assets/images/skib.png", 0.25, 0.25, 30, 375);
      addImage("/assets/images/hestesko.png", 0.3, 0.3, 100, 75);*/

      console.log("Images added")
      function addImage(url, scaleX, scaleY, locX, locY) {
        var image = new Image();
        image.src = url;
        image.onload = function () { //indsæt kun billede når det er loadet
          var imageBitmap = new createjs.Bitmap(image);
          imageBitmap.x = locX;
          imageBitmap.y = locY;
          imageBitmap.scaleX = scaleX;
          imageBitmap.scaleY = scaleY;
          
          stage.addChild(imageBitmap);
          stage.update();

          for (i = 0; i < imagesLoaded.length; i++) {
            if (imagesLoaded[i].src == image.src)
              imagesLoaded[i].loaded = true;
          }
          var allLoaded = true;
          for (i = 0; i < imagesLoaded.length; i++) {
            if (!imagesLoaded[i].loaded)
              allLoaded = false;
          }
          if (allLoaded) {
            console.log("all images loaded")
            addClickEvents();
          }
        }
      }
      function addClickEvents() {
        imagesLoaded[0].on("mousedown", function (evt) {
          this.alpha = 0.1;
          stage.update();
          set(0, true);
        });
        imagesLoaded[1].on("mousedown", function (evt) {
          this.alpha = 0.1;
          stage.update();
          set(0, true);
        });
        imagesLoaded[2].on("mousedown", function (evt) {
          this.alpha = 0.1;
          stage.update();
          set(0, true);
        });
        imagesLoaded[3].on("mousedown", function (evt) {
          this.alpha = 0.1;
          stage.update();
          set(0, true);
        });
        console.log("Click event added")
      }
    }
  </script>

</body>

</html>